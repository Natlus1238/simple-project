---
- hosts: dev
  become: True
  tasks:
   - name: install docker
     sudo apt:
      name: docker
      state: present
   - name: Install prerequisites
      sudo apt: 
       name: python-software-properties 
       state: present
  - name: Install python
      sudo apt: 
       name: python 3.8 
       state: present
   - name: install docker-py python module
     pip:
      name: docker-py
      state: present
   - name: start docker
     service:
      name: docker
      state: started
      enabled: yes
   - name: Start the container
     docker_container:
       name:  newapp
       image: "sultan1238/newapp"
       state: started
       
